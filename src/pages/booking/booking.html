<!--
  Generated template for the BookingPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>
      Mis Reservas
    </ion-title>
  </ion-navbar>
  <ion-toolbar no-border-top>
    <ion-searchbar (ionChange)="getItems($event.value)" [showCancelButton]="shouldShowCancel" placeholder="Buscar reserva">
    </ion-searchbar>
  </ion-toolbar>
</ion-header>


<ion-content>
  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content>
    </ion-refresher-content>
  </ion-refresher>
  <ion-fab top right edge>
    <button ion-fab (click)="newBooking()" class="element">
      <ion-icon name="add"></ion-icon>
    </button>
  </ion-fab>
  <ion-fab bottom right>
      <button  ion-fab id="cart-btn" (click)="goCar()" color="danger"  class="element">
          <ion-icon  name="cart"></ion-icon>
   
       
      </button>

    <!-- <button id="cart-btn" ion-fab icon-only (click)="cart()">
        <ion-icon name="cart"></ion-icon>
        <ion-badge id="cart-badge">26</ion-badge> -->

  </ion-fab>
  <ion-card *ngFor="let booking of bookingsList;let i =index">
    <ion-card-header>


      #{{booking.Res_nume}} - {{booking.FechaInicio | date:'dd/MM/yyyy'}} : {{booking.FechaInicio | digitalDate }}
      <ion-icon item-end name="arrow-dropdown"></ion-icon>
    </ion-card-header>
    <ion-card-content class="animate-in-primary">
      <ion-item class="labelColorRed">
        <ion-thumbnail item-start>
          <img src="data:image/jpeg;base64,{{booking.Cla_foto}}">
        </ion-thumbnail>
        <h2>Tipo de servicio</h2>
        <p>{{booking.Cla_nomb}}</p>
      </ion-item>
      <ion-item class="labelColorBlue">
        <ion-thumbnail item-start>
          <img src="data:image/jpeg;base64,{{booking.Esp_imag}}">
        </ion-thumbnail>
        <h2>Espacio</h2>
        <p>{{booking.Esp_nomb}}</p>
      </ion-item>
      <ion-item>
        <ion-thumbnail item-start>
          <img src="data:image/jpeg;base64,{{booking.Ter_foto}}">
        </ion-thumbnail>
        <h2>Tercero</h2>
        <p>{{booking.Ter_noco}}</p>
      </ion-item>
      <ion-item>
        <ion-icon color="primary" item-start name='clock'></ion-icon>
        <h2>Termina a la(s)</h2>
        <p>{{booking.FechaFin | digitalDate}}</p>
      </ion-item>   
      <ion-item>
        <ion-icon name="logo-usd" color="primary" item-start></ion-icon>
        <h2>Valor</h2>
        <ion-badge color="danger">
          <strong>{{booking.res_valo}}</strong> 
        </ion-badge>
      </ion-item>
      <ion-item (click)="showDetailsPayment(booking)" tappable button detail-push *ngIf="booking.payment != undefined">
        <ion-icon name="information-circle" color="primary" item-start></ion-icon>
        <h2>Estado pago en l√≠nea</h2>
        <ion-badge [color]="booking.payment.pap_esta=='APROBADO' ? 'secondary':'danger'">
        <strong>{{booking.payment.pap_esta}}</strong> 
        </ion-badge>
      </ion-item>
      <ion-item *ngIf="booking.cla_ppag =='S' && booking.Res_vige=='S' && (booking.payment == undefined ||  statesToPay.indexOf(booking.payment.pap_esta) != -1)">
        <button ion-button block large color="danger" (click)="AddCart(booking)">
          <ion-icon name="cart" item-start></ion-icon>
          Agregar al carrito
        </button>
      </ion-item>
      <ion-list-header *ngIf="booking.Res_vige != 'N'">
        Desliza para cancelar la reserva
      </ion-list-header>
      <ion-item *ngIf="booking.Res_vige != 'N'">
        <ion-range min="20" max="80" step="2" color="danger" (ionChange)="CancelChange(booking,i)" debounce="200"
          [(ngModel)]="cancelValue[i]">
          <ion-icon color="primary" range-left name="checkmark-circle"></ion-icon>
          <ion-icon color="danger" range-right name="close-circle"></ion-icon>
        </ion-range>
      </ion-item>
    </ion-card-content>
  </ion-card>

</ion-content>