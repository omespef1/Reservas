<!--
  Generated template for the NetworkingMessagesPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-buttons start>
      <button (click)="goHome()" ion-button round>
        <ion-icon name="home"></ion-icon>
      </button>
    </ion-buttons>
    <ion-buttons end>
      <button (click)="goProfiles()" ion-button>
        <ion-icon name="add"> &nbsp;</ion-icon>
      
      </button>
    </ion-buttons>
    <ion-title>Mensajes</ion-title>

  </ion-navbar>
</ion-header>

<ion-content class="element-aparecer">
 <div class="search-container">
  <ion-searchbar placeholder="Buscar mensajes"  (ionInput)="getItems($event)"></ion-searchbar>
 </div>
 <div>
  <ion-item no-lines class="item-filter">  
    <ion-label>Filtrar Por</ion-label>
    <ion-select >
      <ion-option value="T">Todos</ion-option>
      
    </ion-select>
  </ion-item>
 </div>
 <div text-center>
  <ion-spinner *ngIf="_chatRooms.loading"   name="ios-small" color="primary">
  </ion-spinner>
 </div>



 <div class="card"   *ngFor="let chatRoom of _chatRooms.chatRooms">
  <div class="card-profile" *ngIf="chatRoom.loaded" >
    <ion-item (click)="goChat(chatRoom)" button no-lines no-padding class="item-filter transparent" >
    <ion-avatar class="profile-Menu" item-left>
     
      <img [src]="chatRoom.partnerPhoto==''?'assets/imgs/user-profile.svg':chatRoom.partnerPhoto">
    </ion-avatar>
    
    
    <h2  class="blue"> <b>{{chatRoom.displayNameUser}}</b></h2>
    <h3 class="blue">{{ chatRoom.profession}}</h3>
    <p *ngIf="!chatRoom.lastMessage.read && chatRoom.lastMessage.uid != _auth.user.uid"> <b> {{ chatRoom.lastMessage.content}}</b></p>
    <p *ngIf="chatRoom.lastMessage.read || chatRoom.lastMessage.uid == _auth.user.uid">  {{ chatRoom.lastMessage.content}}</p>
    
  </ion-item>
  <div class="button-message">
    <button class="orange div" ion-button icon-only clear>
      <ion-icon name="ios-mail-outline"></ion-icon>
    </button>
  </div>
  <div *ngIf="!chatRoom.lastMessage.read && chatRoom.lastMessage.uid != _auth.user.uid" class="notification-badge"></div>
  <!-- <div class="button-trash">
    <button class="orange" ion-button icon-only clear>
      <ion-icon name="ios-trash-outline"></ion-icon>
    </button>
  </div> -->
  

  </div>
  <div *ngIf="!chatRoom.loaded">
    <ion-list class="m-n">
      <ion-item no-lines>
        <ion-avatar item-start>
          <skeleton-item height="50px" width="50px"></skeleton-item>
        </ion-avatar>
        <skeleton-item></skeleton-item>
        <skeleton-item height="8px" width="67%"></skeleton-item>
      </ion-item>
      <ion-item no-lines>
        <ion-avatar item-start>
          <skeleton-item height="50px" width="50px" rounded></skeleton-item>
        </ion-avatar>
        <skeleton-item></skeleton-item>
        <skeleton-item height="8px" width="67%"></skeleton-item>
      </ion-item>
    </ion-list>
  </div>
 </div>

 


